extends layout

block content
  #wrapper
    div(id='container', class='center-text')
      #content
        img(src='/images/bitcoin_wallet.svg')
        h1 Bitcoin Wallet
        h4(id='prKeytext') Type Your Private Key:
        form(id='pass_form' class='form-inline')
          div(id='pass_div') 
            input(id='passphrase' type='text' placeholder='Your private key' class='form-control')
            div(id='status' class='invalid-feedback') 
          div
            button(type='submit' class='btn btn-primary') Open
            div(id='under_button' class='invis')
          
  script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js')
  script.
    $(document.forms['pass_form']).on('submit', function(e) {
      e.preventDefault();
      $.ajax({
        url: '/',
        method: 'POST',
        data: {pk: $('#passphrase').val()},
        statusCode: {
          200: function() {
            window.location.href = "/send";
          },
          400: function(jqXHR) {
            console.log(jqXHR.responseText);
            $("#under_button").text(".");
            $("#status").text(jqXHR.responseText);
            $("#passphrase").addClass("form-control is-invalid");
          }
        }
      });
    });
